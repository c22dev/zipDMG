name: Create DMG Archive

on:
  push:
    branches:
      - main

jobs:
  build:
    runs-on: macos-latest

    steps:
    - name: Checkout code
      uses: actions/checkout@v2

    - name: Run DMG script
      run: |
        chmod +x download_and_zip.sh
        ./download_and_zip.sh
      working-directory: ${{ github.workspace }}

    - name: Archive ZIP file
      id: archive
      run: |
        mv /path/to/output/output.zip ${{ github.workspace }}/output.zip
      continue-on-error: true

    - name: Upload ZIP file
      uses: actions/upload-artifact@v2
      with:
        name: output-zip
        path: ${{ github.workspace }}/output.zip

    - name: Set ZIP output
      id: set-output
      run: echo "::set-output name=zip_file::${{ github.workspace }}/output.zip"

outputs:
  zip_file:
    description: 'The path to the generated ZIP file'
